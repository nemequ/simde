#define SIMDE_TEST_X86_AVX512_INSN range

#include <test/x86/avx512/test-avx512.h>
#include <simde/x86/avx512/set.h>
#include <simde/x86/avx512/setzero.h>
#include <simde/x86/avx512/range.h>

static int
test_simde_mm512_range_pd (SIMDE_MUNIT_TEST_ARGS) {
#if 1
  static const struct {
    const double a[8];
    const double b[8];
    const int imm8;
    const double r[8];
  } test_vec[] = {
    { { SIMDE_FLOAT64_C(   711.34), SIMDE_FLOAT64_C(  -438.26), SIMDE_FLOAT64_C(   939.28), SIMDE_FLOAT64_C(  -458.68),
        SIMDE_FLOAT64_C(   113.23), SIMDE_FLOAT64_C(  -263.69), SIMDE_FLOAT64_C(    26.97), SIMDE_FLOAT64_C(  -319.43) },
      { SIMDE_FLOAT64_C(  -954.59), SIMDE_FLOAT64_C(   214.09), SIMDE_FLOAT64_C(  -523.24), SIMDE_FLOAT64_C(  -541.37),
        SIMDE_FLOAT64_C(   659.34), SIMDE_FLOAT64_C(   428.56), SIMDE_FLOAT64_C(   901.81), SIMDE_FLOAT64_C(  -715.99) },
       INT32_C(          12),
      { SIMDE_FLOAT64_C(  -954.59), SIMDE_FLOAT64_C(  -438.26), SIMDE_FLOAT64_C(  -523.24), SIMDE_FLOAT64_C(  -541.37),
        SIMDE_FLOAT64_C(  -113.23), SIMDE_FLOAT64_C(  -263.69), SIMDE_FLOAT64_C(   -26.97), SIMDE_FLOAT64_C(  -715.99) } },
    { { SIMDE_FLOAT64_C(  -907.30), SIMDE_FLOAT64_C(   490.51), SIMDE_FLOAT64_C(   492.79), SIMDE_FLOAT64_C(  -998.74),
        SIMDE_FLOAT64_C(  -942.20), SIMDE_FLOAT64_C(   725.29), SIMDE_FLOAT64_C(   986.69), SIMDE_FLOAT64_C(   598.69) },
      { SIMDE_FLOAT64_C(   576.92), SIMDE_FLOAT64_C(  -954.99), SIMDE_FLOAT64_C(   888.13), SIMDE_FLOAT64_C(  -642.01),
        SIMDE_FLOAT64_C(  -866.70), SIMDE_FLOAT64_C(  -869.68), SIMDE_FLOAT64_C(  -930.66), SIMDE_FLOAT64_C(  -304.96) },
       INT32_C(           2),
      { SIMDE_FLOAT64_C(  -576.92), SIMDE_FLOAT64_C(   490.51), SIMDE_FLOAT64_C(   492.79), SIMDE_FLOAT64_C(  -642.01),
        SIMDE_FLOAT64_C(  -866.70), SIMDE_FLOAT64_C(   725.29), SIMDE_FLOAT64_C(   930.66), SIMDE_FLOAT64_C(   304.96) } },
    { { SIMDE_FLOAT64_C(  -389.34), SIMDE_FLOAT64_C(   808.27), SIMDE_FLOAT64_C(  -194.08), SIMDE_FLOAT64_C(   637.63),
        SIMDE_FLOAT64_C(  -511.16), SIMDE_FLOAT64_C(  -148.68), SIMDE_FLOAT64_C(  -148.27), SIMDE_FLOAT64_C(   -34.39) },
      { SIMDE_FLOAT64_C(   309.95), SIMDE_FLOAT64_C(  -488.93), SIMDE_FLOAT64_C(  -605.83), SIMDE_FLOAT64_C(   211.77),
        SIMDE_FLOAT64_C(  -204.92), SIMDE_FLOAT64_C(  -856.75), SIMDE_FLOAT64_C(   304.47), SIMDE_FLOAT64_C(  -714.42) },
       INT32_C(           8),
      { SIMDE_FLOAT64_C(   389.34), SIMDE_FLOAT64_C(   488.93), SIMDE_FLOAT64_C(   605.83), SIMDE_FLOAT64_C(   211.77),
        SIMDE_FLOAT64_C(   511.16), SIMDE_FLOAT64_C(   856.75), SIMDE_FLOAT64_C(   148.27), SIMDE_FLOAT64_C(   714.42) } },
    { { SIMDE_FLOAT64_C(   305.72), SIMDE_FLOAT64_C(  -656.62), SIMDE_FLOAT64_C(   361.34), SIMDE_FLOAT64_C(   292.41),
        SIMDE_FLOAT64_C(   942.07), SIMDE_FLOAT64_C(   -61.75), SIMDE_FLOAT64_C(   337.42), SIMDE_FLOAT64_C(   830.19) },
      { SIMDE_FLOAT64_C(   296.25), SIMDE_FLOAT64_C(   470.72), SIMDE_FLOAT64_C(   960.51), SIMDE_FLOAT64_C(   365.58),
        SIMDE_FLOAT64_C(  -834.24), SIMDE_FLOAT64_C(  -969.88), SIMDE_FLOAT64_C(   976.24), SIMDE_FLOAT64_C(   974.03) },
       INT32_C(           2),
      { SIMDE_FLOAT64_C(   296.25), SIMDE_FLOAT64_C(  -470.72), SIMDE_FLOAT64_C(   361.34), SIMDE_FLOAT64_C(   292.41),
        SIMDE_FLOAT64_C(   834.24), SIMDE_FLOAT64_C(   -61.75), SIMDE_FLOAT64_C(   337.42), SIMDE_FLOAT64_C(   830.19) } },
    { { SIMDE_FLOAT64_C(   613.88), SIMDE_FLOAT64_C(  -537.12), SIMDE_FLOAT64_C(   687.36), SIMDE_FLOAT64_C(  -534.40),
        SIMDE_FLOAT64_C(   428.48), SIMDE_FLOAT64_C(    -2.69), SIMDE_FLOAT64_C(   -23.33), SIMDE_FLOAT64_C(   822.65) },
      { SIMDE_FLOAT64_C(  -790.92), SIMDE_FLOAT64_C(   771.74), SIMDE_FLOAT64_C(   965.91), SIMDE_FLOAT64_C(   513.55),
        SIMDE_FLOAT64_C(  -942.67), SIMDE_FLOAT64_C(   601.95), SIMDE_FLOAT64_C(  -180.73), SIMDE_FLOAT64_C(  -599.30) },
       INT32_C(           7),
      { SIMDE_FLOAT64_C(  -790.92), SIMDE_FLOAT64_C(   771.74), SIMDE_FLOAT64_C(   965.91), SIMDE_FLOAT64_C(  -534.40),
        SIMDE_FLOAT64_C(  -942.67), SIMDE_FLOAT64_C(   601.95), SIMDE_FLOAT64_C(  -180.73), SIMDE_FLOAT64_C(   822.65) } },
    { { SIMDE_FLOAT64_C(  -888.32), SIMDE_FLOAT64_C(  -657.23), SIMDE_FLOAT64_C(   901.54), SIMDE_FLOAT64_C(   449.10),
        SIMDE_FLOAT64_C(  -827.04), SIMDE_FLOAT64_C(   197.78), SIMDE_FLOAT64_C(   -80.17), SIMDE_FLOAT64_C(  -866.53) },
      { SIMDE_FLOAT64_C(  -436.63), SIMDE_FLOAT64_C(    85.59), SIMDE_FLOAT64_C(  -836.41), SIMDE_FLOAT64_C(  -460.39),
        SIMDE_FLOAT64_C(    59.63), SIMDE_FLOAT64_C(    -0.37), SIMDE_FLOAT64_C(  -846.52), SIMDE_FLOAT64_C(   522.50) },
       INT32_C(           6),
      { SIMDE_FLOAT64_C(  -436.63), SIMDE_FLOAT64_C(    85.59), SIMDE_FLOAT64_C(  -836.41), SIMDE_FLOAT64_C(   449.10),
        SIMDE_FLOAT64_C(    59.63), SIMDE_FLOAT64_C(    -0.37), SIMDE_FLOAT64_C(   -80.17), SIMDE_FLOAT64_C(   522.50) } },
    { { SIMDE_FLOAT64_C(  -380.91), SIMDE_FLOAT64_C(   -49.01), SIMDE_FLOAT64_C(   684.29), SIMDE_FLOAT64_C(   595.75),
        SIMDE_FLOAT64_C(  -226.36), SIMDE_FLOAT64_C(   893.37), SIMDE_FLOAT64_C(   367.50), SIMDE_FLOAT64_C(  -260.45) },
      { SIMDE_FLOAT64_C(   406.92), SIMDE_FLOAT64_C(   424.82), SIMDE_FLOAT64_C(  -658.50), SIMDE_FLOAT64_C(  -773.81),
        SIMDE_FLOAT64_C(   825.53), SIMDE_FLOAT64_C(   304.78), SIMDE_FLOAT64_C(  -662.12), SIMDE_FLOAT64_C(  -831.71) },
       INT32_C(           8),
      { SIMDE_FLOAT64_C(   380.91), SIMDE_FLOAT64_C(    49.01), SIMDE_FLOAT64_C(   658.50), SIMDE_FLOAT64_C(   773.81),
        SIMDE_FLOAT64_C(   226.36), SIMDE_FLOAT64_C(   304.78), SIMDE_FLOAT64_C(   662.12), SIMDE_FLOAT64_C(   831.71) } },
    { { SIMDE_FLOAT64_C(   786.98), SIMDE_FLOAT64_C(  -658.75), SIMDE_FLOAT64_C(  -595.90), SIMDE_FLOAT64_C(  -293.19),
        SIMDE_FLOAT64_C(  -525.27), SIMDE_FLOAT64_C(   -32.53), SIMDE_FLOAT64_C(   792.40), SIMDE_FLOAT64_C(  -361.68) },
      { SIMDE_FLOAT64_C(   507.07), SIMDE_FLOAT64_C(  -147.97), SIMDE_FLOAT64_C(   637.94), SIMDE_FLOAT64_C(   660.56),
        SIMDE_FLOAT64_C(  -625.47), SIMDE_FLOAT64_C(  -675.08), SIMDE_FLOAT64_C(  -720.36), SIMDE_FLOAT64_C(   325.52) },
       INT32_C(           7),
      { SIMDE_FLOAT64_C(   786.98), SIMDE_FLOAT64_C(  -658.75), SIMDE_FLOAT64_C(   637.94), SIMDE_FLOAT64_C(   660.56),
        SIMDE_FLOAT64_C(  -625.47), SIMDE_FLOAT64_C(  -675.08), SIMDE_FLOAT64_C(   792.40), SIMDE_FLOAT64_C(  -361.68) } },
  };

  for (size_t i = 0 ; i < (sizeof(test_vec) / sizeof(test_vec[0])) ; i++) {
    simde__m512d a = simde_mm512_loadu_pd(test_vec[i].a);
    simde__m512d b = simde_mm512_loadu_pd(test_vec[i].b);
    simde__m512d r;
    SIMDE_CONSTIFY_16_(simde_mm512_range_pd, r, (HEDLEY_UNREACHABLE(), simde_mm512_setzero_pd ()), test_vec[i].imm8, a, b);
    simde_test_x86_assert_equal_f64x8(r, simde_mm512_loadu_pd(test_vec[i].r), 1);
  }

  return 0;
#else
  fputc('\n', stdout);
  for (int i = 0 ; i < 8 ; i++) {
    simde__m512d a = simde_test_x86_random_f64x8(SIMDE_FLOAT64_C(-1000.0), SIMDE_FLOAT64_C(1000.0));
    simde__m512d b = simde_test_x86_random_f64x8(SIMDE_FLOAT64_C(-1000.0), SIMDE_FLOAT64_C(1000.0));
    int imm8 = simde_test_codegen_rand() & 15;
    simde__m512d r;
    SIMDE_CONSTIFY_16_(simde_mm512_range_pd, r, (HEDLEY_UNREACHABLE(), simde_mm512_setzero_pd ()), imm8, a, b);

    simde_test_x86_write_f64x8(2, a, SIMDE_TEST_VEC_POS_FIRST);
    simde_test_x86_write_f64x8(2, b, SIMDE_TEST_VEC_POS_MIDDLE);
    simde_test_codegen_write_i32(2, imm8, SIMDE_TEST_VEC_POS_MIDDLE);
    simde_test_x86_write_f64x8(2, r, SIMDE_TEST_VEC_POS_LAST);
  }
  return 1;
#endif
}

static int
test_simde_mm512_range_ps (SIMDE_MUNIT_TEST_ARGS) {
#if 1
  static const struct {
    const float a[16];
    const float b[16];
    const int imm8;
    const float r[16];
  } test_vec[] = {
    { { SIMDE_FLOAT32_C(  -736.26), SIMDE_FLOAT32_C(   366.06), SIMDE_FLOAT32_C(  -865.47), SIMDE_FLOAT32_C(  -486.04),
        SIMDE_FLOAT32_C(    67.38), SIMDE_FLOAT32_C(   846.51), SIMDE_FLOAT32_C(   821.31), SIMDE_FLOAT32_C(  -795.34),
        SIMDE_FLOAT32_C(  -735.75), SIMDE_FLOAT32_C(   -28.52), SIMDE_FLOAT32_C(   773.12), SIMDE_FLOAT32_C(   689.11),
        SIMDE_FLOAT32_C(   504.93), SIMDE_FLOAT32_C(   288.93), SIMDE_FLOAT32_C(  -794.89), SIMDE_FLOAT32_C(   134.30) },
      { SIMDE_FLOAT32_C(   543.61), SIMDE_FLOAT32_C(   286.50), SIMDE_FLOAT32_C(   759.91), SIMDE_FLOAT32_C(  -941.51),
        SIMDE_FLOAT32_C(   699.62), SIMDE_FLOAT32_C(  -886.86), SIMDE_FLOAT32_C(   -50.55), SIMDE_FLOAT32_C(  -569.21),
        SIMDE_FLOAT32_C(   446.26), SIMDE_FLOAT32_C(   511.12), SIMDE_FLOAT32_C(   934.81), SIMDE_FLOAT32_C(  -911.44),
        SIMDE_FLOAT32_C(   862.67), SIMDE_FLOAT32_C(    11.78), SIMDE_FLOAT32_C(  -155.40), SIMDE_FLOAT32_C(  -873.59) },
       INT32_C(          11),
      { SIMDE_FLOAT32_C(   736.26), SIMDE_FLOAT32_C(   366.06), SIMDE_FLOAT32_C(   865.47), SIMDE_FLOAT32_C(   941.51),
        SIMDE_FLOAT32_C(   699.62), SIMDE_FLOAT32_C(   886.86), SIMDE_FLOAT32_C(   821.31), SIMDE_FLOAT32_C(   795.34),
        SIMDE_FLOAT32_C(   735.75), SIMDE_FLOAT32_C(   511.12), SIMDE_FLOAT32_C(   934.81), SIMDE_FLOAT32_C(   911.44),
        SIMDE_FLOAT32_C(   862.67), SIMDE_FLOAT32_C(   288.93), SIMDE_FLOAT32_C(   794.89), SIMDE_FLOAT32_C(   873.59) } },
    { { SIMDE_FLOAT32_C(   -20.87), SIMDE_FLOAT32_C(  -359.62), SIMDE_FLOAT32_C(   445.22), SIMDE_FLOAT32_C(  -174.37),
        SIMDE_FLOAT32_C(  -538.31), SIMDE_FLOAT32_C(   649.88), SIMDE_FLOAT32_C(    89.88), SIMDE_FLOAT32_C(   433.16),
        SIMDE_FLOAT32_C(   423.00), SIMDE_FLOAT32_C(  -221.01), SIMDE_FLOAT32_C(   -61.90), SIMDE_FLOAT32_C(  -288.07),
        SIMDE_FLOAT32_C(   -15.90), SIMDE_FLOAT32_C(  -927.60), SIMDE_FLOAT32_C(  -744.46), SIMDE_FLOAT32_C(  -729.40) },
      { SIMDE_FLOAT32_C(   832.31), SIMDE_FLOAT32_C(  -685.98), SIMDE_FLOAT32_C(   970.21), SIMDE_FLOAT32_C(   945.46),
        SIMDE_FLOAT32_C(   263.48), SIMDE_FLOAT32_C(  -599.00), SIMDE_FLOAT32_C(   391.72), SIMDE_FLOAT32_C(  -225.40),
        SIMDE_FLOAT32_C(  -664.18), SIMDE_FLOAT32_C(   480.28), SIMDE_FLOAT32_C(  -362.73), SIMDE_FLOAT32_C(   347.59),
        SIMDE_FLOAT32_C(  -675.12), SIMDE_FLOAT32_C(  -236.32), SIMDE_FLOAT32_C(   725.43), SIMDE_FLOAT32_C(   304.00) },
       INT32_C(           8),
      { SIMDE_FLOAT32_C(    20.87), SIMDE_FLOAT32_C(   685.98), SIMDE_FLOAT32_C(   445.22), SIMDE_FLOAT32_C(   174.37),
        SIMDE_FLOAT32_C(   538.31), SIMDE_FLOAT32_C(   599.00), SIMDE_FLOAT32_C(    89.88), SIMDE_FLOAT32_C(   225.40),
        SIMDE_FLOAT32_C(   664.18), SIMDE_FLOAT32_C(   221.01), SIMDE_FLOAT32_C(   362.73), SIMDE_FLOAT32_C(   288.07),
        SIMDE_FLOAT32_C(   675.12), SIMDE_FLOAT32_C(   927.60), SIMDE_FLOAT32_C(   744.46), SIMDE_FLOAT32_C(   729.40) } },
    { { SIMDE_FLOAT32_C(   170.66), SIMDE_FLOAT32_C(  -870.36), SIMDE_FLOAT32_C(   865.74), SIMDE_FLOAT32_C(  -179.46),
        SIMDE_FLOAT32_C(   219.52), SIMDE_FLOAT32_C(   298.91), SIMDE_FLOAT32_C(  -756.46), SIMDE_FLOAT32_C(   998.51),
        SIMDE_FLOAT32_C(  -763.00), SIMDE_FLOAT32_C(   -44.53), SIMDE_FLOAT32_C(   -17.39), SIMDE_FLOAT32_C(  -690.60),
        SIMDE_FLOAT32_C(   211.01), SIMDE_FLOAT32_C(   253.20), SIMDE_FLOAT32_C(  -858.28), SIMDE_FLOAT32_C(   525.03) },
      { SIMDE_FLOAT32_C(   223.42), SIMDE_FLOAT32_C(  -912.82), SIMDE_FLOAT32_C(  -211.49), SIMDE_FLOAT32_C(   624.42),
        SIMDE_FLOAT32_C(   478.89), SIMDE_FLOAT32_C(   563.11), SIMDE_FLOAT32_C(   960.23), SIMDE_FLOAT32_C(   -40.83),
        SIMDE_FLOAT32_C(  -799.62), SIMDE_FLOAT32_C(   307.83), SIMDE_FLOAT32_C(   284.05), SIMDE_FLOAT32_C(   -35.94),
        SIMDE_FLOAT32_C(    33.26), SIMDE_FLOAT32_C(  -411.95), SIMDE_FLOAT32_C(  -631.88), SIMDE_FLOAT32_C(  -796.08) },
       INT32_C(           9),
      { SIMDE_FLOAT32_C(   223.42), SIMDE_FLOAT32_C(   870.36), SIMDE_FLOAT32_C(   865.74), SIMDE_FLOAT32_C(   624.42),
        SIMDE_FLOAT32_C(   478.89), SIMDE_FLOAT32_C(   563.11), SIMDE_FLOAT32_C(   960.23), SIMDE_FLOAT32_C(   998.51),
        SIMDE_FLOAT32_C(   763.00), SIMDE_FLOAT32_C(   307.83), SIMDE_FLOAT32_C(   284.05), SIMDE_FLOAT32_C(    35.94),
        SIMDE_FLOAT32_C(   211.01), SIMDE_FLOAT32_C(   253.20), SIMDE_FLOAT32_C(   631.88), SIMDE_FLOAT32_C(   525.03) } },
    { { SIMDE_FLOAT32_C(  -766.13), SIMDE_FLOAT32_C(    24.46), SIMDE_FLOAT32_C(   937.21), SIMDE_FLOAT32_C(   532.77),
        SIMDE_FLOAT32_C(   267.99), SIMDE_FLOAT32_C(   935.72), SIMDE_FLOAT32_C(   769.78), SIMDE_FLOAT32_C(  -776.53),
        SIMDE_FLOAT32_C(   -81.68), SIMDE_FLOAT32_C(  -920.82), SIMDE_FLOAT32_C(   434.47), SIMDE_FLOAT32_C(  -828.47),
        SIMDE_FLOAT32_C(  -779.10), SIMDE_FLOAT32_C(   -40.49), SIMDE_FLOAT32_C(   394.94), SIMDE_FLOAT32_C(  -691.92) },
      { SIMDE_FLOAT32_C(   748.02), SIMDE_FLOAT32_C(    19.36), SIMDE_FLOAT32_C(   786.97), SIMDE_FLOAT32_C(   311.13),
        SIMDE_FLOAT32_C(   -20.40), SIMDE_FLOAT32_C(  -253.86), SIMDE_FLOAT32_C(   511.51), SIMDE_FLOAT32_C(  -712.58),
        SIMDE_FLOAT32_C(  -969.81), SIMDE_FLOAT32_C(  -524.43), SIMDE_FLOAT32_C(   320.69), SIMDE_FLOAT32_C(  -381.76),
        SIMDE_FLOAT32_C(  -156.31), SIMDE_FLOAT32_C(   524.61), SIMDE_FLOAT32_C(   335.93), SIMDE_FLOAT32_C(    77.56) },
       INT32_C(          13),
      { SIMDE_FLOAT32_C(  -748.02), SIMDE_FLOAT32_C(   -24.46), SIMDE_FLOAT32_C(  -937.21), SIMDE_FLOAT32_C(  -532.77),
        SIMDE_FLOAT32_C(  -267.99), SIMDE_FLOAT32_C(  -935.72), SIMDE_FLOAT32_C(  -769.78), SIMDE_FLOAT32_C(  -712.58),
        SIMDE_FLOAT32_C(   -81.68), SIMDE_FLOAT32_C(  -524.43), SIMDE_FLOAT32_C(  -434.47), SIMDE_FLOAT32_C(  -381.76),
        SIMDE_FLOAT32_C(  -156.31), SIMDE_FLOAT32_C(  -524.61), SIMDE_FLOAT32_C(  -394.94), SIMDE_FLOAT32_C(   -77.56) } },
    { { SIMDE_FLOAT32_C(   273.14), SIMDE_FLOAT32_C(  -389.67), SIMDE_FLOAT32_C(   817.06), SIMDE_FLOAT32_C(   208.86),
        SIMDE_FLOAT32_C(  -619.89), SIMDE_FLOAT32_C(  -959.48), SIMDE_FLOAT32_C(  -872.82), SIMDE_FLOAT32_C(  -540.71),
        SIMDE_FLOAT32_C(   475.00), SIMDE_FLOAT32_C(  -701.29), SIMDE_FLOAT32_C(  -319.81), SIMDE_FLOAT32_C(  -565.49),
        SIMDE_FLOAT32_C(   693.65), SIMDE_FLOAT32_C(   -11.73), SIMDE_FLOAT32_C(  -817.47), SIMDE_FLOAT32_C(  -286.99) },
      { SIMDE_FLOAT32_C(  -224.76), SIMDE_FLOAT32_C(   493.65), SIMDE_FLOAT32_C(   692.61), SIMDE_FLOAT32_C(   521.39),
        SIMDE_FLOAT32_C(     5.16), SIMDE_FLOAT32_C(   980.03), SIMDE_FLOAT32_C(   551.58), SIMDE_FLOAT32_C(   480.73),
        SIMDE_FLOAT32_C(   300.72), SIMDE_FLOAT32_C(  -830.18), SIMDE_FLOAT32_C(  -675.58), SIMDE_FLOAT32_C(  -174.68),
        SIMDE_FLOAT32_C(   505.75), SIMDE_FLOAT32_C(   401.98), SIMDE_FLOAT32_C(   374.39), SIMDE_FLOAT32_C(  -221.10) },
       INT32_C(           4),
      { SIMDE_FLOAT32_C(  -224.76), SIMDE_FLOAT32_C(  -389.67), SIMDE_FLOAT32_C(   692.61), SIMDE_FLOAT32_C(   208.86),
        SIMDE_FLOAT32_C(  -619.89), SIMDE_FLOAT32_C(  -959.48), SIMDE_FLOAT32_C(  -872.82), SIMDE_FLOAT32_C(  -540.71),
        SIMDE_FLOAT32_C(   300.72), SIMDE_FLOAT32_C(  -830.18), SIMDE_FLOAT32_C(  -675.58), SIMDE_FLOAT32_C(  -565.49),
        SIMDE_FLOAT32_C(   505.75), SIMDE_FLOAT32_C(   -11.73), SIMDE_FLOAT32_C(  -817.47), SIMDE_FLOAT32_C(  -286.99) } },
    { { SIMDE_FLOAT32_C(   191.45), SIMDE_FLOAT32_C(   987.75), SIMDE_FLOAT32_C(  -607.57), SIMDE_FLOAT32_C(   231.97),
        SIMDE_FLOAT32_C(  -885.07), SIMDE_FLOAT32_C(  -148.28), SIMDE_FLOAT32_C(  -293.03), SIMDE_FLOAT32_C(  -586.36),
        SIMDE_FLOAT32_C(   531.92), SIMDE_FLOAT32_C(   141.48), SIMDE_FLOAT32_C(  -892.71), SIMDE_FLOAT32_C(  -479.81),
        SIMDE_FLOAT32_C(   324.00), SIMDE_FLOAT32_C(  -179.70), SIMDE_FLOAT32_C(   295.43), SIMDE_FLOAT32_C(  -182.34) },
      { SIMDE_FLOAT32_C(  -487.10), SIMDE_FLOAT32_C(  -183.19), SIMDE_FLOAT32_C(   822.81), SIMDE_FLOAT32_C(  -507.07),
        SIMDE_FLOAT32_C(  -631.61), SIMDE_FLOAT32_C(   303.54), SIMDE_FLOAT32_C(   793.65), SIMDE_FLOAT32_C(  -461.79),
        SIMDE_FLOAT32_C(   627.96), SIMDE_FLOAT32_C(  -381.03), SIMDE_FLOAT32_C(  -956.03), SIMDE_FLOAT32_C(    29.94),
        SIMDE_FLOAT32_C(   993.36), SIMDE_FLOAT32_C(  -177.14), SIMDE_FLOAT32_C(    42.25), SIMDE_FLOAT32_C(   184.81) },
       INT32_C(          11),
      { SIMDE_FLOAT32_C(   487.10), SIMDE_FLOAT32_C(   987.75), SIMDE_FLOAT32_C(   822.81), SIMDE_FLOAT32_C(   507.07),
        SIMDE_FLOAT32_C(   885.07), SIMDE_FLOAT32_C(   303.54), SIMDE_FLOAT32_C(   793.65), SIMDE_FLOAT32_C(   586.36),
        SIMDE_FLOAT32_C(   627.96), SIMDE_FLOAT32_C(   381.03), SIMDE_FLOAT32_C(   956.03), SIMDE_FLOAT32_C(   479.81),
        SIMDE_FLOAT32_C(   993.36), SIMDE_FLOAT32_C(   179.70), SIMDE_FLOAT32_C(   295.43), SIMDE_FLOAT32_C(   184.81) } },
    { { SIMDE_FLOAT32_C(   434.68), SIMDE_FLOAT32_C(  -583.22), SIMDE_FLOAT32_C(   -74.45), SIMDE_FLOAT32_C(  -713.60),
        SIMDE_FLOAT32_C(   123.75), SIMDE_FLOAT32_C(   339.19), SIMDE_FLOAT32_C(   818.32), SIMDE_FLOAT32_C(  -734.77),
        SIMDE_FLOAT32_C(   446.47), SIMDE_FLOAT32_C(  -661.50), SIMDE_FLOAT32_C(   589.24), SIMDE_FLOAT32_C(  -733.23),
        SIMDE_FLOAT32_C(   633.93), SIMDE_FLOAT32_C(  -593.11), SIMDE_FLOAT32_C(  -220.33), SIMDE_FLOAT32_C(  -549.26) },
      { SIMDE_FLOAT32_C(  -770.30), SIMDE_FLOAT32_C(   272.61), SIMDE_FLOAT32_C(  -180.86), SIMDE_FLOAT32_C(   533.25),
        SIMDE_FLOAT32_C(    66.26), SIMDE_FLOAT32_C(   357.35), SIMDE_FLOAT32_C(   161.21), SIMDE_FLOAT32_C(   685.23),
        SIMDE_FLOAT32_C(   401.32), SIMDE_FLOAT32_C(  -808.85), SIMDE_FLOAT32_C(   678.59), SIMDE_FLOAT32_C(  -775.82),
        SIMDE_FLOAT32_C(   233.40), SIMDE_FLOAT32_C(  -136.60), SIMDE_FLOAT32_C(    34.80), SIMDE_FLOAT32_C(  -331.92) },
       INT32_C(          15),
      { SIMDE_FLOAT32_C(  -770.30), SIMDE_FLOAT32_C(  -583.22), SIMDE_FLOAT32_C(  -180.86), SIMDE_FLOAT32_C(  -713.60),
        SIMDE_FLOAT32_C(  -123.75), SIMDE_FLOAT32_C(  -357.35), SIMDE_FLOAT32_C(  -818.32), SIMDE_FLOAT32_C(  -734.77),
        SIMDE_FLOAT32_C(  -446.47), SIMDE_FLOAT32_C(  -808.85), SIMDE_FLOAT32_C(  -678.59), SIMDE_FLOAT32_C(  -775.82),
        SIMDE_FLOAT32_C(  -633.93), SIMDE_FLOAT32_C(  -593.11), SIMDE_FLOAT32_C(  -220.33), SIMDE_FLOAT32_C(  -549.26) } },
    { { SIMDE_FLOAT32_C(   960.35), SIMDE_FLOAT32_C(   -45.52), SIMDE_FLOAT32_C(  -596.07), SIMDE_FLOAT32_C(   299.54),
        SIMDE_FLOAT32_C(  -227.21), SIMDE_FLOAT32_C(  -330.84), SIMDE_FLOAT32_C(  -253.99), SIMDE_FLOAT32_C(   111.30),
        SIMDE_FLOAT32_C(  -741.60), SIMDE_FLOAT32_C(    12.78), SIMDE_FLOAT32_C(  -254.77), SIMDE_FLOAT32_C(  -334.71),
        SIMDE_FLOAT32_C(   792.45), SIMDE_FLOAT32_C(   195.97), SIMDE_FLOAT32_C(  -105.00), SIMDE_FLOAT32_C(    65.06) },
      { SIMDE_FLOAT32_C(  -984.90), SIMDE_FLOAT32_C(  -571.76), SIMDE_FLOAT32_C(  -868.69), SIMDE_FLOAT32_C(   372.45),
        SIMDE_FLOAT32_C(   589.45), SIMDE_FLOAT32_C(   816.54), SIMDE_FLOAT32_C(  -226.23), SIMDE_FLOAT32_C(   780.59),
        SIMDE_FLOAT32_C(   495.13), SIMDE_FLOAT32_C(    -2.05), SIMDE_FLOAT32_C(    13.99), SIMDE_FLOAT32_C(  -641.47),
        SIMDE_FLOAT32_C(  -967.25), SIMDE_FLOAT32_C(   682.07), SIMDE_FLOAT32_C(   638.71), SIMDE_FLOAT32_C(   993.10) },
       INT32_C(           8),
      { SIMDE_FLOAT32_C(   984.90), SIMDE_FLOAT32_C(   571.76), SIMDE_FLOAT32_C(   868.69), SIMDE_FLOAT32_C(   299.54),
        SIMDE_FLOAT32_C(   227.21), SIMDE_FLOAT32_C(   330.84), SIMDE_FLOAT32_C(   253.99), SIMDE_FLOAT32_C(   111.30),
        SIMDE_FLOAT32_C(   741.60), SIMDE_FLOAT32_C(     2.05), SIMDE_FLOAT32_C(   254.77), SIMDE_FLOAT32_C(   641.47),
        SIMDE_FLOAT32_C(   967.25), SIMDE_FLOAT32_C(   195.97), SIMDE_FLOAT32_C(   105.00), SIMDE_FLOAT32_C(    65.06) } },
  };

  for (size_t i = 0 ; i < (sizeof(test_vec) / sizeof(test_vec[0])) ; i++) {
    simde__m512 a = simde_mm512_loadu_ps(test_vec[i].a);
    simde__m512 b = simde_mm512_loadu_ps(test_vec[i].b);
    simde__m512 r;
    SIMDE_CONSTIFY_16_(simde_mm512_range_ps, r, (HEDLEY_UNREACHABLE(), simde_mm512_setzero_ps ()), test_vec[i].imm8, a, b);
    simde_test_x86_assert_equal_f32x16(r, simde_mm512_loadu_ps(test_vec[i].r), 1);
  }

  return 0;
#else
  fputc('\n', stdout);
  for (int i = 0 ; i < 8 ; i++) {
    simde__m512 a = simde_test_x86_random_f32x16(SIMDE_FLOAT32_C(-1000.0), SIMDE_FLOAT32_C(1000.0));
    simde__m512 b = simde_test_x86_random_f32x16(SIMDE_FLOAT32_C(-1000.0), SIMDE_FLOAT32_C(1000.0));
    int imm8 = simde_test_codegen_rand() & 15;
    simde__m512 r;
    SIMDE_CONSTIFY_16_(simde_mm512_range_ps, r, (HEDLEY_UNREACHABLE(), simde_mm512_setzero_ps ()), imm8, a, b);

    simde_test_x86_write_f32x16(2, a, SIMDE_TEST_VEC_POS_FIRST);
    simde_test_x86_write_f32x16(2, b, SIMDE_TEST_VEC_POS_MIDDLE);
    simde_test_codegen_write_i32(2, imm8, SIMDE_TEST_VEC_POS_MIDDLE);
    simde_test_x86_write_f32x16(2, r, SIMDE_TEST_VEC_POS_LAST);
  }
  return 1;
#endif
}

SIMDE_TEST_FUNC_LIST_BEGIN
  SIMDE_TEST_FUNC_LIST_ENTRY(mm512_range_pd)
  SIMDE_TEST_FUNC_LIST_ENTRY(mm512_range_ps)
SIMDE_TEST_FUNC_LIST_END

#include <test/x86/avx512/test-avx512-footer.h>
